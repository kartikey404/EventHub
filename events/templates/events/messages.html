<!-- messages.html -->
<script>
  const currentUserId = '{{ request.user.id }}';
  const receiverId = 2;  // Example receiver user ID
  const socket = new WebSocket(`ws://${window.location.host}/ws/chat/${receiverId}/`);

  socket.onmessage = function(e) {
    const data = JSON.parse(e.data);
    const chatBox = document.getElementById('chat-box');
    const messageEl = document.createElement('div');
    messageEl.textContent = `${data.sender_id == currentUserId ? "You" : "Them"}: ${data.message}`;
    chatBox.appendChild(messageEl);
  };

  function sendMessage() {
    const messageInput = document.getElementById('message-input');
    socket.send(JSON.stringify({ message: messageInput.value }));
    messageInput.value = '';
  }
</script>
